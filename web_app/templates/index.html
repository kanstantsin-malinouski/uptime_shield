<!DOCTYPE html>
<html>
<head>
    <title>Uptime Shield</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-slate-900 text-white font-sans p-10">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-4xl font-black mb-8 text-blue-400 flex items-center">
            <i class="fas fa-satellite-dish mr-4"></i> Uptime Monitor
        </h1>
        
        <div class="flex gap-2 mb-10 bg-slate-800 p-2 rounded-xl border border-slate-700">
            <input id="urlInput" type="text" placeholder="google.com" class="bg-transparent p-3 flex-1 outline-none">
            <button onclick="addUrl()" class="bg-blue-600 hover:bg-blue-500 px-8 py-3 rounded-lg font-bold transition">Add Site</button>
        </div>

        <div id="statusGrid" class="space-y-4">
            </div>
    </div>

    <script>
        async function addUrl() {
            const input = document.getElementById('urlInput');
            if (!input.value) return;
            await fetch('/add', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({url: input.value})
            });
            input.value = '';
            refresh();
        }

        async function refresh() {
            const res = await fetch('/data');
            const data = await res.json();
            const container = document.getElementById('statusGrid');
            
            container.innerHTML = data.map(site => `
                <div class="bg-slate-800 border-l-4 ${site.status === 'Online' ? 'border-green-500' : 'border-red-500'} p-5 rounded-r-xl flex justify-between items-center shadow-lg">
                    <div>
                        <a href="${site.url}" target="_blank" class="text-xl font-bold text-blue-300 hover:underline flex items-center">
                            ${site.url} <i class="fas fa-external-link-alt ml-2 text-xs opacity-50"></i>
                        </a>
                        <div class="text-slate-400 text-sm mt-1">
                            ${site.history[0] ? `Last check: ${site.history[0].time} (${site.history[0].ms}ms)` : 'Waiting for worker...'}
                        </div>
                    </div>
                    <span class="px-4 py-1 rounded-full text-xs font-black uppercase ${site.status === 'Online' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}">
                        ${site.status}
                    </span>
                </div>
            `).join('');
        }
        setInterval(refresh, 2000); 
        refresh();
    </script>
</body>
</html>